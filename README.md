## About
A simple URL Shortener made with Ruby On Rails.

- Rails: ~> 6.1.4
- Ruby:  2.7.4

## Getting Started
### ruby/javascript dependencies, and migrations
```bash
./bin/setup 
```

```bash
rails server
```

## Running specs
```bash
rspec
```

```bash
/any_project$  rspec spec --format documentation

Shortener::Link
  validations
    is expected to validate that :long_url cannot be empty/falsy
    is expected to validate that :token is case-sensitively unique
    does not allow create a custom token with a blocklisted domain
    performs basic validation of URI formats
    validate a max legnth of the long url for a broaden browser support
  link creation
    creates an token automatically when persisting new links
    retry the token generate until it reaches the max attempts
    retry and fetch a new token before the max attempts
    allow persist a custom token generated by the user
    does not re-generate an token when updating a link
    does return the short url with domain

Shortener::LinksController
  GET /
    defines shortener/links#new as root
    render the correct template with proper instance variables
  GET /:token
    redirects a token to the long url
    404 not found for not existing items
  POST /
    does not create links for blocklisted domains
    does redirect to the long url

Link Management
  allows fill a full url at home page and create a shortened version
  404
    renders 404 on invalid GET /:token
    renders 404 on invalid GET /:token/info
  visit a token
    track visitor data

Finished in 2.15 seconds (files took 1.39 seconds to load)
21 examples, 0 failures


```


## Routes
```
GET    /                         # home page (create short URLS)
GET    /:token(.:format)         # visit short urls (redirect to the long urls)
GET    /:token/info              # URL stats (visitors, click, sessions) 
```

## Main files
<pre><font color="#0000CD"><b>app/</b></font>
├── <font color="#0000CD"><b>assets</b></font>
│   └── <font color="#0000CD"><b>stylesheets</b></font>
│       ├── application.css
│       └── <font color="#0000CD"><b>shortener</b></font>
│           ├── _colors.scss
│           ├── _components.scss
│           └── links.scss
├── <font color="#0000CD"><b>controllers</b></font>
│   ├── application_controller.rb
│   ├── <font color="#0000CD"><b>concerns</b></font>
│   │   └── response_errors.rb
│   └── <font color="#0000CD"><b>shortener</b></font>
│       ├── <font color="#0000CD"><b>links</b></font>
│       │   └── infos_controller.rb
│       └── links_controller.rb
├── <font color="#0000CD"><b>javascript</b></font>
│   └── <font color="#0000CD"><b>packs</b></font>
│       └── application.js
├── <font color="#0000CD"><b>models</b></font>
│   ├── application_record.rb
│   ├── <font color="#0000CD"><b>concerns</b></font>
│   ├── <font color="#0000CD"><b>shortener</b></font>
│   │   ├── link.rb
│   │   ├── link_visitor.rb
│   │   ├── max_attempt_exception.rb
│   │   └── token_generator.rb
│   └── shortener.rb
├── <font color="#0000CD"><b>validators</b></font>
│   └── blacklisted_domain_validator.rb
└── <font color="#0000CD"><b>views</b></font>
    ├── <font color="#0000CD"><b>layouts</b></font>
    │   └── application.html.erb
    ├── <font color="#0000CD"><b>shared</b></font>
    │   └── _model_errors.html.erb
    └── <font color="#0000CD"><b>shortener</b></font>
        └── <font color="#0000CD"><b>links</b></font>
            ├── <font color="#0000CD"><b>infos</b></font>
            │   └── show.html.erb
            └── new.html.erb
<font color="#0000CD"><b>public/</b></font>
├── 404.html
</pre>
